package org.exploit.depth.example;

import android.os.IBinder;
import android.os.RemoteException;

import org.exploit.depth.internal.IRootRemote;
import org.exploit.depth.internal.ProcessHostConfig;

import bin.androidlua.LuaRunner;
import bin.luajava.LuaException;

public class Main implements IRootRemote {
    /**
     * @param args
     * args[0] = SU程序路径
     * args[...] = 你传的参数
     */
    @Override
    public void onCreate(String[] args) {
        try {
            LuaRunner runner = new LuaRunner();
            runner.run("print('Su进程内调用')".getBytes(),"test");
            runner.close();
        } catch (LuaException e) {
            e.printStackTrace();
        }

        for (int i = 0; i < args.length; i++) {
            System.out.println("args["+i+"]="+args[i]);
        }
    }

    @Override
    public IBinder onBind() {
        return new Test.Stub() {
            @Override
            public String test() throws RemoteException {
                return "测试123";
            }
        };
    }
}
