package org.exploit.depth.widget;

import android.content.Context;
import android.graphics.SurfaceTexture;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.util.AttributeSet;
import android.view.Surface;
import android.view.TextureView;

public class SurfaceBufferView extends TextureView implements TextureView.SurfaceTextureListener {

    private SurfaceBufferListener surfaceBufferListener;

    public interface SurfaceBufferListener{
        void onSurfaceCreate(Surface surface);
        void onSurfaceChanged(Surface surface);
        boolean onSurfaceDestroyed(Surface surface);
        void onSurfaceUpdated(Surface surface);
    }


    public SurfaceBufferView(@NonNull Context context,SurfaceBufferListener surfaceBufferListener) {
        super(context);
        setSurfaceTextureListener(this);
        this.surfaceBufferListener = surfaceBufferListener;
    }

    @Override
    public void onSurfaceTextureAvailable(@NonNull SurfaceTexture surface, int width, int height) {
        surfaceBufferListener.onSurfaceCreate(new Surface(surface));
    }

    @Override
    public void onSurfaceTextureSizeChanged(@NonNull SurfaceTexture surface, int width, int height) {
        surfaceBufferListener.onSurfaceChanged(new Surface(surface));
    }

    @Override
    public boolean onSurfaceTextureDestroyed(@NonNull SurfaceTexture surface) {
        return surfaceBufferListener.onSurfaceDestroyed(new Surface(surface));
    }

    @Override
    public void onSurfaceTextureUpdated(@NonNull SurfaceTexture surface) {
        surfaceBufferListener.onSurfaceUpdated(new Surface(surface));
    }
}
