package org.exploit.depth.internal;

public class IPCMain {

    public static void main(String[] args) {
        String[] newArgs = new String[args.length - 2];
        newArgs[0] = args[0];
        for (int i = 3; i < args.length; i++) {
            newArgs[i-2] = args[i];
        }
        try {
            Class<IRootRemote> mainClz = (Class<IRootRemote>) Class.forName(args[1]);
            IRootRemote mainObj = mainClz.newInstance();
            mainObj.onCreate(newArgs);
            new RootIPC(args[2], mainObj.onBind(), 0, 30 * 1000, true);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (RootIPC.TimeoutException e) {
            e.printStackTrace();
        }
    }
}
